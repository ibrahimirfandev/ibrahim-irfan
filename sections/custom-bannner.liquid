<style>
  /* --- IMPORT FONTS --- */
  /* Bringing in Google Fonts (Jost & Lustria) for consistent typography */
  @import url('https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&family=Lustria&display=swap');

  /* --- GLOBAL CONTAINER --- */
  .tiso-gift-section-wrapper {
    width: 100%;
    overflow: visible;
    font-family: Jost; /* Main font family */
    color: #000;
    /* Dynamic padding and background based on Theme Editor settings */
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    background-color: {{ section.settings.section_bg }};
    position: relative;
  }

  /* --- HEADER BLOCK STYLES (Top Bar) --- */
  .tiso-top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 40px;
    background-color: #f9f9f9;
    border-bottom: 1px solid #e0e0e0;
    position: relative;
    z-index: 20;
  }

  /* Hamburger Menu (Hidden on Desktop) */
  .tiso-mobile-toggle {
    display: none; /* Hidden by default, shown in media queries */
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    margin-right: 20px;
    z-index: 21;
  }
  .tiso-mobile-toggle svg { width: 24px; height: 24px; display: block; }
  
  /* Toggle Icon Logic (Hamburger vs Close X) */
  .tiso-mobile-toggle .icon-close { display: none; }
  .tiso-mobile-toggle.is-active .icon-hamburger { display: none; }
  .tiso-mobile-toggle.is-active .icon-close { display: block; }

  /* Brand Name Styling */
  .tiso-brand-logo {
    font-size: 20px;
    font-weight: 500;
    letter-spacing: 1px;
    text-transform: uppercase;
    flex-shrink: 0;
  }

  .tiso-collapsible-content { display: contents; }

  /* Center descriptive text */
  .tiso-center-text {
    font-size: 14px;
    color: #333;
    text-align: center;
  }

  /* --- TOP BUTTON STYLES & ANIMATION --- */
  .tiso-top-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 12px 28px;
    font-size: 13px;
    font-weight: 600;
    text-decoration: none;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
    transition: color 0.4s ease;
    border: none;
    white-space: nowrap;
    color: #000;
  }
  
  /* Hover effect: Sliding background fill */
  .tiso-top-btn span { position: relative; z-index: 2; display: flex; align-items: center; gap: 8px; }
  .tiso-top-btn::before {
    content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-color: #000; z-index: 1; transform: scaleX(0); transform-origin: right;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .tiso-top-btn:hover { color: #fff; }
  .tiso-top-btn:hover::before { transform: scaleX(1); }
  .tiso-top-btn svg { width: 16px; height: 12px; transition: transform 0.3s ease; }
  .tiso-top-btn:hover svg { transform: translateX(3px); }

  /* --- MAIN HERO CONTENT STYLES --- */
  .tiso-main-content {
    position: relative;
    width: 100%;
    min-height: 550px;
    display: flex;
    padding: 60px 50px;
    background-size: cover; /* Ensures image covers whole area */
    background-position: center;
    background-repeat: no-repeat;
  }

  /* Hero Button Styles */
  .tiso-main-btn {
    display: inline-flex;
    align-items: center;
    padding: 16px 40px;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 1px;
    text-transform: uppercase;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    transition: color 0.4s ease;
    cursor: pointer;
    color: #fff;
  }
  .tiso-main-btn span { position: relative; z-index: 2; display: flex; align-items: center; gap: 10px; }
  .tiso-main-btn::before {
    content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--hover-color, #F8F148); z-index: 1;
    transform: scaleX(0); transform-origin: left; transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .tiso-main-btn:hover { color: #000; }
  .tiso-main-btn:hover::before { transform: scaleX(1); }

  /* --- BOTTOM BAR STYLES --- */
  .tiso-bottom-bar {
    padding: 12px 20px;
    text-align: center;
    font-weight: 500;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }

  .tiso-desc-mob { display: none; }

  /* --- DESKTOP LAYOUT (Screens wider than 901px) --- */
  @media (min-width: 901px) {
    .tiso-main-content { align-items: center; }
    
    /* White text box overlay */
    .tiso-text-box {
      margin-bottom: -240px;
      margin-left: -50px;
      position: relative;
      z-index: 2;
      background-color: #fff;
      padding: 40px;
      max-width: 500px;
    }
    .tiso-main-heading { margin: 0 0 20px 0; line-height: 1.1; font-weight: 700; }
    .tiso-desc { line-height: 1.5; margin-bottom: 30px; }
    
    /* Flexbox layout for top bar alignment */
    .tiso-center-text { flex: 2; }
    .tiso-btn-container { flex: 1; display: flex; justify-content: flex-end; }
    .tiso-brand-logo { flex: 1; }
  }

  /* --- LARGE SCREENS (4k+) --- */
  @media (min-width: 3000px) {
    .tiso-bottom-bar { font-size: 42px; }
    .tiso-brand-logo { font-size: 55px; font-weight: 500; }
  }

  /* --- MOBILE LAYOUT (Screens smaller than 900px) --- */
  @media (max-width: 900px) {
    .tiso-top-bar { justify-content: flex-start; padding: 15px 20px; }
    .tiso-mobile-toggle { display: block; } /* Show Hamburger */
    .tiso-brand-logo { margin-left: 10px; flex: 1; }

    /* Mobile Dropdown Menu */
    .tiso-collapsible-content {
      display: none; 
      position: absolute;
      top: 100%; left: 0; width: 100%;
      background-color: #f9f9f9;
      flex-direction: column; align-items: center; gap: 20px;
      padding: 30px 20px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
      z-index: 99;
    }
    /* Active class toggled via JS */
    .tiso-collapsible-content.is-open { display: flex; animation: slideDown 0.3s ease-out; }
    .tiso-center-text, .tiso-btn-container, .tiso-top-btn { width: 100%; margin-bottom: 5px; }

    /* Stack content vertically on mobile */
    .tiso-main-content {
      flex-direction: column; justify-content: flex-start;
      background-color: #fff;
      background-repeat: no-repeat;
      background-position: bottom center;
      background-size: 100% auto; 
      padding: 40px 20px 175px 20px;
      min-height: auto; height: auto;
    }
    
    /* Remove white box styling for mobile */
    .tiso-text-box { 
      display: block; text-align: center; background: transparent; margin: 0; padding: 0;
    }
    .tiso-main-heading { margin-bottom: 15px; font-weight: 700; }
    .tiso-desc { display: none; } /* Hide desktop desc */
    .tiso-desc-mob { display: block; line-height: 1.4; text-align: center; margin-bottom: 0; }
    
    /* Floating button on mobile */
    .tiso-main-btn {
      position: absolute; bottom: 10%; left: 50%;
      transform: translateX(-50%); z-index: 5;
      width: 193px; justify-content: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
  }

  /* Slide down animation for mobile menu */
  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>

<div class="tiso-gift-section-wrapper" id="tiso-gift-section">
  {% comment %} Loop through all blocks added in the Shopify Editor {% endcomment %}
  {% for block in section.blocks %}
    {% case block.type %}
      
      {% comment %} ================= HEADER BLOCK ================= {% endcomment %}
      {% when 'header' %}
        <div class="tiso-top-bar" {{ block.shopify_attributes }}>
          <button class="tiso-mobile-toggle" aria-label="Toggle Menu" onclick="toggleTisoMenu()">
            <svg class="icon-hamburger" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 12H21" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 6H21" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 18H21" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <svg class="icon-close" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 6L6 18" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 6L18 18" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>

          <div class="tiso-brand-logo">{{ block.settings.brand_name }}</div>
          
          <div class="tiso-collapsible-content" id="tiso-menu-content">
            <div class="tiso-center-text">{{ block.settings.center_text }}</div>
            <div class="tiso-btn-container">
              <a href="{{ block.settings.btn_url }}" class="tiso-top-btn" style="background-color: {{ block.settings.btn_bg }};">
                <span>
                  {{ block.settings.btn_text }}
                  <svg viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 1L13 5L9 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 5H1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </span>
              </a>
            </div>
          </div>
        </div>

      {% comment %} ================= MAIN IMAGE & TEXT BLOCK ================= {% endcomment %}
      {% when 'main_section' %}
        <style>
          /* Scoped styles for this specific block ID to allow multiple blocks with different settings */
          #block-{{ block.id }} .tiso-main-heading {
            color: {{ block.settings.heading_color }};
            font-size: {{ block.settings.heading_size_d }}px;
          }
          #block-{{ block.id }} .tiso-desc {
            color: {{ block.settings.desc_color }};
            font-size: {{ block.settings.desc_size_d }}px;
          }
          #block-{{ block.id }} .tiso-desc-mob {
            color: {{ block.settings.desc_color }};
            font-size: {{ block.settings.desc_size_m }}px;
          }
          /* Responsive Background Images based on Block Settings */
          @media (max-width: 900px) {
            #block-{{ block.id }} {
              background-image: url('{{ block.settings.image | img_url: "1000x" }}');
            }
            #block-{{ block.id }} .tiso-main-heading {
              font-size: {{ block.settings.heading_size_m }}px;
            }
          }
          @media (min-width: 901px) {
            #block-{{ block.id }} {
              background-image: url('{{ block.settings.image | img_url: "2000x" }}');
            }
          }
          @media (min-width: 3000px) {
            #block-{{ block.id }} {
              background-image: url('{{ block.settings.image | img_url: "3000x" }}');
            }
          }
        </style>
        
        <div id="block-{{ block.id }}" class="tiso-main-content" {{ block.shopify_attributes }}>
          <div class="tiso-text-box">
            <h2 class="tiso-main-heading">{{ block.settings.heading }}</h2>
            <div class="tiso-desc">{{ block.settings.desc_d | newline_to_br }}</div>
            <div class="tiso-desc-mob">{{ block.settings.desc_m | newline_to_br }}</div>
            
            <a href="{{ block.settings.btn_url }}" class="tiso-main-btn" style="background-color: {{ block.settings.btn_bg }}; --hover-color: {{ block.settings.btn_hover }};">
              <span>
                {{ block.settings.btn_text }}
                <svg width="18" height="12" viewBox="0 0 18 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 1L17 6L12 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M17 6H1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </span>
            </a>
          </div>
        </div>

      {% comment %} ================= BOTTOM BAR BLOCK ================= {% endcomment %}
      {% when 'bottom_bar' %}
        <div class="tiso-bottom-bar" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}; font-size: {{ block.settings.font_size }}px;" {{ block.shopify_attributes }}>
          {{ block.settings.text }}
        </div>

    {% endcase %}
  {% endfor %}
</div>

<script>
  // Function to handle opening and closing the mobile menu
  function toggleTisoMenu() {
    var toggleBtn = document.querySelector('.tiso-mobile-toggle');
    var menuContent = document.getElementById('tiso-menu-content');
    
    // Toggle active/open classes
    toggleBtn.classList.toggle('is-active');
    menuContent.classList.toggle('is-open');
  }
</script>

{% comment %} 
  SHOPIFY SCHEMA 
  Defines settings available in the Theme Editor for the user.
{% endcomment %}
{% schema %}
{
  "name": "Gift Guide (Blocks)",
  "settings": [
    {
      "type": "header",
      "content": "Global Settings"
    },
    {
      "type": "color",
      "id": "section_bg",
      "label": "Section Background",
      "default": "#FFFFFF"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Top Padding",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "header",
      "name": "Header / Top Bar",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "brand_name",
          "label": "Brand Name",
          "default": "TISSO VISON"
        },
        {
          "type": "text",
          "id": "center_text",
          "label": "Center Text",
          "default": "Find the ideal gift for your loved ones."
        },
        {
          "type": "text",
          "id": "btn_text",
          "label": "Button Text",
          "default": "CHOOSE GIFT"
        },
        {
          "type": "url",
          "id": "btn_url",
          "label": "Button Link"
        },
        {
          "type": "color",
          "id": "btn_bg",
          "label": "Button Background",
          "default": "#F8F148"
        }
      ]
    },
    {
      "type": "main_section",
      "name": "Main Section",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Background Image"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "The Gift Guide"
        },
        {
          "type": "textarea",
          "id": "desc_d",
          "label": "Desktop Description",
          "default": "Discover Joy: Your Ultimate Holiday Gift Destination. Explore our curated selection and find the perfect gifts to delight your loved ones this holiday season."
        },
        {
          "type": "textarea",
          "id": "desc_m",
          "label": "Mobile Description",
          "default": "Discover Joy: Your Ultimate Holiday Gift Destination."
        },
        {
          "type": "header",
          "content": "Typography Settings"
        },
        {
          "type": "color",
          "id": "heading_color",
          "label": "Heading Color",
          "default": "#000000"
        },
        {
          "type": "range",
          "id": "heading_size_d",
          "min": 20,
          "max": 80,
          "step": 1,
          "unit": "px",
          "label": "Heading Size (Desktop)",
          "default": 48
        },
        {
          "type": "range",
          "id": "heading_size_m",
          "min": 16,
          "max": 50,
          "step": 1,
          "unit": "px",
          "label": "Heading Size (Mobile)",
          "default": 32
        },
        {
          "type": "color",
          "id": "desc_color",
          "label": "Description Color",
          "default": "#333333"
        },
        {
          "type": "range",
          "id": "desc_size_d",
          "min": 12,
          "max": 30,
          "step": 1,
          "unit": "px",
          "label": "Description Size (Desktop)",
          "default": 16
        },
        {
          "type": "range",
          "id": "desc_size_m",
          "min": 10,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Description Size (Mobile)",
          "default": 16
        },
        {
          "type": "header",
          "content": "Button Settings"
        },
        {
          "type": "text",
          "id": "btn_text",
          "label": "Button Text",
          "default": "SHOP NOW"
        },
        {
          "type": "url",
          "id": "btn_url",
          "label": "Button Link"
        },
        {
          "type": "color",
          "id": "btn_bg",
          "label": "Button Background",
          "default": "#000000"
        },
        {
          "type": "color",
          "id": "btn_hover",
          "label": "Button Hover Color",
          "default": "#F8F148"
        }
      ]
    },
    {
      "type": "bottom_bar",
      "name": "Bottom Bar",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "SUSTAINABLE, ETHICALLY MADE CLOTHES IN SIZES XXS TO 6XL"
        },
        {
          "type": "color",
          "id": "bg_color",
          "label": "Background Color",
          "default": "#F4F4F4"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color",
          "default": "#222222"
        },
        {
          "type": "range",
          "id": "font_size",
          "min": 10,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Font Size",
          "default": 12
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Gift Guide Section",
      "blocks": [
        {
          "type": "header"
        },
        {
          "type": "main_section"
        },
        {
          "type": "bottom_bar"
        }
      ]
    }
  ]
}
{% endschema %}